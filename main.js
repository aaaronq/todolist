(()=>{"use strict";function e(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(n){e(1,arguments);var r=Object.prototype.toString.call(n);return n instanceof Date||"object"===t(n)&&"[object Date]"===r?new Date(n.getTime()):"number"==typeof n||"[object Number]"===r?new Date(n):("string"!=typeof n&&"[object String]"!==r||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function r(t,r){e(2,arguments);var a=n(t),o=n(r),s=a.getTime()-o.getTime();return s<0?-1:s>0?1:s}function a(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(t,r){if(e(2,arguments),!r||"object"!==o(r))return new Date(NaN);var s=r.years?a(r.years):0,i=r.months?a(r.months):0,c=r.weeks?a(r.weeks):0,d=r.days?a(r.days):0,l=r.hours?a(r.hours):0,u=r.minutes?a(r.minutes):0,m=r.seconds?a(r.seconds):0,p=n(t),g=i||s?function(t,r){e(2,arguments);var o=n(t),s=a(r);if(isNaN(s))return new Date(NaN);if(!s)return o;var i=o.getDate(),c=new Date(o.getTime());return c.setMonth(o.getMonth()+s+1,0),i>=c.getDate()?c:(o.setFullYear(c.getFullYear(),c.getMonth(),i),o)}(p,i+12*s):p,b=d||c?function(t,r){e(2,arguments);var o=n(t),s=a(r);return isNaN(s)?new Date(NaN):s?(o.setDate(o.getDate()+s),o):o}(g,d+7*c):g,h=1e3*(m+60*(u+60*l));return new Date(b.getTime()+h)}function i(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function c(t){e(1,arguments);var r=n(t);return r.setHours(0,0,0,0),r}var d=864e5;function l(e,t){var n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}Math.pow(10,8);var u=6e4,m=36e5;function p(t,r){return e(2,arguments),n(t).getTime()-n(r).getTime()}var g={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},b="trunc";function h(e){return e?g[e]:g[b]}function f(t,a){e(2,arguments);var o,s=n(t),i=n(a),c=r(s,i),d=Math.abs(function(t,r){e(2,arguments);var a=n(t),o=n(r);return 12*(a.getFullYear()-o.getFullYear())+(a.getMonth()-o.getMonth())}(s,i));if(d<1)o=0;else{1===s.getMonth()&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-c*d);var l=r(s,i)===-c;(function(t){e(1,arguments);var r=n(t);return function(t){e(1,arguments);var r=n(t);return r.setHours(23,59,59,999),r}(r).getTime()===function(t){e(1,arguments);var r=n(t),a=r.getMonth();return r.setFullYear(r.getFullYear(),a+1,0),r.setHours(23,59,59,999),r}(r).getTime()})(n(t))&&1===d&&1===r(t,i)&&(l=!1),o=c*(d-Number(l))}return 0===o?0:o}function y(t){e(1,arguments);var a=n(t.start),o=n(t.end);if(isNaN(a.getTime()))throw new RangeError("Start Date is invalid");if(isNaN(o.getTime()))throw new RangeError("End Date is invalid");var g={};g.years=Math.abs(function(t,a){e(2,arguments);var o=n(t),s=n(a),i=r(o,s),c=Math.abs(function(t,r){e(2,arguments);var a=n(t),o=n(r);return a.getFullYear()-o.getFullYear()}(o,s));o.setFullYear(1584),s.setFullYear(1584);var d=r(o,s)===-i,l=i*(c-Number(d));return 0===l?0:l}(o,a));var b=r(o,a),y=s(a,{years:b*g.years});g.months=Math.abs(f(o,y));var v=s(y,{months:b*g.months});g.days=Math.abs(function(t,r){e(2,arguments);var a=n(t),o=n(r),s=l(a,o),u=Math.abs(function(t,n){e(2,arguments);var r=c(t),a=c(n),o=r.getTime()-i(r),s=a.getTime()-i(a);return Math.round((o-s)/d)}(a,o));a.setDate(a.getDate()-s*u);var m=s*(u-Number(l(a,o)===-s));return 0===m?0:m}(o,v));var T=s(v,{days:b*g.days});g.hours=Math.abs(function(t,n,r){e(2,arguments);var a=p(t,n)/m;return h(null==r?void 0:r.roundingMethod)(a)}(o,T));var E=s(T,{hours:b*g.hours});g.minutes=Math.abs(function(t,n,r){e(2,arguments);var a=p(t,n)/u;return h(null==r?void 0:r.roundingMethod)(a)}(o,E));var D=s(E,{minutes:b*g.minutes});return g.seconds=Math.abs(function(t,n,r){e(2,arguments);var a=p(t,n)/1e3;return h(null==r?void 0:r.roundingMethod)(a)}(o,D)),g}const v=(()=>{const t=document.querySelector(".modal");t.style.display="none";const r=document.querySelector(".modalcontent"),a=document.getElementById("addProjectBtn"),o=document.getElementById("allProjectsBtn"),s=()=>{"none"==t.style.display?t.style.display="block":t.style.display="none",r.innerHTML="",r.classList.remove("tasksmodal")};t.addEventListener("click",(e=>{e.target===e.currentTarget&&(t.style.display="none")})),a.addEventListener("click",(()=>{s();const e=document.createElement("form"),t=document.createElement("h2");t.innerText="New Project";const n=document.createElement("label");n.innerText="Project Name",n.setAttribute("for","projectName");const a=document.createElement("input");a.setAttribute("type","text"),a.id="projectName",a.setAttribute("autocomplete","off"),a.setAttribute("name","projectName"),a.setAttribute("minlength","1"),a.setAttribute("maxlength","15"),a.setAttribute("required","");const o=document.createElement("div");o.classList.add("buttons");const d=document.createElement("button"),l=document.createElement("button");d.classList.add("btn"),d.id="cancelBtn",d.innerText="Cancel",d.setAttribute("type","button"),l.classList.add("btn"),l.id="submitBtn",l.innerText="Submit",o.appendChild(d),o.appendChild(l),e.appendChild(n),e.appendChild(a),e.appendChild(o),r.appendChild(t),r.appendChild(e),d.addEventListener("click",s),e.addEventListener("submit",(()=>{T.addProject(a.value),c(),i(),s()})),e.addEventListener("submit",(e=>e.preventDefault())),a.focus()})),document.getElementById("addTaskBtn").addEventListener("click",(()=>{s(),r.classList.add("tasksmodal");const e=document.createElement("form"),t=document.createElement("h2");t.innerText="Add a task";const n=document.createElement("label");n.innerText="Task Name",n.setAttribute("for","taskName");const a=document.createElement("input");a.setAttribute("type","text"),a.id="taskName",a.setAttribute("autocomplete","off"),a.setAttribute("name","taskName"),a.setAttribute("minlength","1"),a.setAttribute("maxlength","15"),a.setAttribute("required","");const o=document.createElement("label");o.innerText="Task Description",o.setAttribute("for","taskDesc");const c=document.createElement("textarea");c.id="taskDesc",c.setAttribute("wrap","soft"),c.setAttribute("name","taskDesc"),c.setAttribute("minlength","1"),c.setAttribute("maxlength","110");const d=document.createElement("label");d.innerText="By date",d.setAttribute("for","taskDate");const l=document.createElement("input");l.id="taskDate",l.setAttribute("type","Date"),l.setAttribute("name","taskDate");const u=document.createElement("div");u.classList.add("buttons");const m=document.createElement("button"),p=document.createElement("button");m.classList.add("btn"),m.id="cancelBtn",m.innerText="Cancel",m.setAttribute("type","button"),p.classList.add("btn"),p.id="submitBtn",p.innerText="Submit",u.appendChild(m),u.appendChild(p),e.appendChild(n),e.appendChild(a),e.appendChild(o),e.appendChild(c),e.appendChild(d),e.appendChild(l),e.appendChild(u),r.appendChild(t),r.appendChild(e),m.addEventListener("click",s),e.addEventListener("submit",(e=>{e.preventDefault(),E.createTodo(a.value,c.value,l.value),i(),s()})),a.focus()}));const i=()=>{document.querySelector(".todolist").innerText="";let t=T.getCurrentProject();t="All"===t?E.getTodoList("All"):t.todos,t.forEach((t=>((t,a,o,c)=>{const d=document.querySelector(".todolist"),l=document.createElement("div");l.classList.add("todo"),l.setAttribute("data-todoID",c);const u=document.createElement("h2");u.innerText=t;const m=document.createElement("p");m.innerText=(t=>{const r=new Date(t),a=y({start:new Date,end:r});let o="";(function(t,r){e(2,arguments);var a=n(t),o=n(r);return a.getTime()>o.getTime()})(new Date,r)&&(o="-");const s=a.years,i=a.months,c=a.days;return 1===s?`${o}${s} year`:s>1?`${o}${s} years`:0===s&&0===i&&0===c?"today":0===s&&0===i?`${o}${c} days`:0===s&&0===i&&1===c?`${o}${c} day`:0===s&&1===i?`${o}${i} month`:0===s&&i>1?`${o}${i} months`:void 0})(o),m.classList.add("date");const p=document.createElement("p");p.innerText=a;const g=document.createElement("div");g.classList.add("buttons");const b=document.createElement("img");b.id="finishBtn",b.setAttribute("src","./icons/check-circle-outline.svg"),b.setAttribute("alt","finish");const h=document.createElement("img");h.id="editBtn",h.setAttribute("src","./icons/pencil-circle-outline.svg"),h.setAttribute("alt","edit"),b.addEventListener("click",(()=>{E.removeTodo(c),i()})),h.addEventListener("click",(()=>(e=>{const t=E.getTodoByID(e);s(),r.classList.add("tasksmodal");const n=document.createElement("form"),a=document.createElement("h2");a.innerText="Edit task";const o=document.createElement("label");o.innerText="Task Name",o.setAttribute("for","taskName");const c=document.createElement("input");c.setAttribute("type","text"),c.id="taskName",c.setAttribute("autocomplete","off"),c.setAttribute("name","taskName"),c.value=t.name;const d=document.createElement("label");d.innerText="Task Description",d.setAttribute("for","taskDesc");const l=document.createElement("textarea");l.id="taskDesc",l.setAttribute("wrap","soft"),l.setAttribute("name","taskDesc"),l.value=t.desc;const u=document.createElement("label");u.innerText="By date",u.setAttribute("for","taskDate");const m=document.createElement("input");m.id="taskDate",m.setAttribute("type","Date"),m.setAttribute("name","taskDate"),m.value=t.date;const p=document.createElement("div");p.classList.add("buttons");const g=document.createElement("button"),b=document.createElement("button");g.classList.add("btn"),g.id="cancelBtn",g.innerText="Cancel",g.setAttribute("type","button"),b.classList.add("btn"),b.id="submitBtn",b.innerText="Submit",p.appendChild(g),p.appendChild(b),n.appendChild(o),n.appendChild(c),n.appendChild(d),n.appendChild(l),n.appendChild(u),n.appendChild(m),n.appendChild(p),r.appendChild(a),r.appendChild(n),g.addEventListener("click",s),n.addEventListener("submit",(t=>{t.preventDefault(),E.editTodo(e,c.value,l.value,m.value),i(),s()})),l.focus()})(c))),g.appendChild(b),g.appendChild(h),l.appendChild(u),l.appendChild(m),l.appendChild(p),l.appendChild(g),d.appendChild(l)})(t.name,t.desc,t.date,t.id)))},c=()=>{const e=document.querySelector(".projects");e.innerText="",e.appendChild(a),e.appendChild(o),T.getProjectList().forEach((e=>(e=>{const t=document.querySelector(".projects"),n=document.createElement("button");n.classList.add("btn"),n.innerText=e,n.addEventListener("click",(()=>{T.setCurrentProject(e),T.updateProjectTodos(),i(),d()})),t.appendChild(n)})(e.name))),d()};o.addEventListener("click",(()=>{T.setCurrentProject("All"),i(),d()}));const d=()=>{const e=document.querySelector(".projects").childNodes;e.forEach((e=>e.classList.remove("currentProject")));let t=T.getCurrentProject();"All"!==t&&(t=t.name),e.forEach((e=>{e.innerText===t&&e.classList.add("currentProject")}))};return{checkLocalStorage:()=>{null!==localStorage.getItem("projects")&&(c(),T.updateProjectTodos(),i(),d())}}})(),T=(()=>{let e=[],t=null;null!==localStorage.getItem("projects")&&(e=JSON.parse(localStorage.getItem("projects")),t=JSON.parse(localStorage.getItem("currentProject")));const n=n=>{if("All"!==n){if(!e.some((e=>e.name===n)))return!1;t=e.find((e=>e.name===n)),localStorage.setItem("currentProject",JSON.stringify(t))}else t="All"};return{getProjectList:()=>e,getCurrentProject:()=>t,setCurrentProject:n,addProject:t=>{if(e.includes(t))return!1;e.push({name:t,todos:[]}),n(t),localStorage.setItem("projects",JSON.stringify(e))},updateProjectTodos:()=>{t.todos=[],E.getTodoList(t.name).forEach((e=>t.todos.push(e)))}}})(),E=(()=>{let e=[],t=0;return null!==localStorage.getItem("allTodos")&&(e=JSON.parse(localStorage.getItem("allTodos")),t=JSON.parse(localStorage.getItem("id"))),{allTodos:e,createTodo:(n,r,a)=>{const o={name:n,desc:r,date:a,id:t};o.project=T.getCurrentProject().name,e.push(o),T.updateProjectTodos(),localStorage.setItem("allTodos",JSON.stringify(e)),t++,localStorage.setItem("id",JSON.stringify(t))},editTodo:(t,n,r,a)=>{if(!e.some((e=>e.id===t)))return!1;const o=e.find((e=>e.id===t)),s=e.indexOf(o);o.name=n,o.desc=r,o.date=a,e[s]=o,T.updateProjectTodos()},getTodoList:t=>{const n=(e,t)=>new Date(e.date)-new Date(t.date);return"All"===t?e.sort(n):e.filter((e=>e.project===t)).sort(n)},removeTodo:t=>{const n=e.find((e=>e.id===t));if(!n)return;const r=e.indexOf(n);-1!==r&&e.splice(r,1),T.updateProjectTodos(),localStorage.setItem("allTodos",JSON.stringify(e))},getTodoByID:t=>e.find((e=>e.id===t))}})();v.checkLocalStorage()})();